// General configuration used in all profiles
manifest {
  name = "FastOMA - Orthology inference"
  description = """FastOMA computes Hierarchical Orthologous Groups from proteomes."""
  author = "Sina Majidian, Adrian Altenhoff"
  homePage = "https://omabrowser.org"
  mainScript = "FastOMA.nf"
  nextflowVersion = "22.10.4"
}

params {
  container_name = "dessimozlab/fastoma"
  container_version = "latest"
  omamer_db = "https://omabrowser.org/All/Primates-v2.0.0.h5"
  debug_enabled = false
  help = false

  output_folder = "Output"
  statsdir = "${params.output_folder}/stats"
}

// Profiles configure nextflow depending on the environment (local, docker, singularity)
profiles {

  docker {
    process {
      container = "$params.container_name:$params.container_version"
    }
    docker.enabled = true
  }

  singularity {
    process {
      container = "$params.container_name:$params.container_version"
    }
    singularity.enabled = true
    singularity.autoMounts = true
  }

  standard {
    process.executor = 'local'
  }

  conda {
    process.conda = "environment-conda.yml"
    conda.enabled = true
  }

  slurm_singularity {
    process {
      container = "$params.container_name:$params.container_version"
      executor = "slurm"
      time = 4.h
      memory = 20.GB
    }
    singularity.enabled = true
    singularity.autoMounts = true
  }

  slurm_conda {
    process {
      conda = "environment-conda.yml"
      executor = "slurm"
      time = 4.h
      memory = 20.GB
    }
    conda.enabled = true
  }
}

timeline {
  enabled = true
  file = "${params.statsdir}/timeline.html"
}
report {
  enabled = false
  file = "${params.statsdir}/report.html"
}